%h2 Shopping Cart
= form_tag checkout_path, :id => 'user_shopping_cart' do
  - if @current_shopping_cart_list.nil? || @current_shopping_cart_list.empty?
    %h4 You have no items in your shopping cart
    %h4 Wallet Balance: $#{'%.2f' % @wallet.wallet}
  - else
    - total_price = 0
    .product_listing
      %table.product_listing_display
        - @current_shopping_cart_list.each do |item|
          %tr.product_listing_row
            %td.product_listing_row
              .listing_img
                = link_to image_tag(item.product.image.url, :height => "400", :class => "card-img"), product_path(item.product.id)
              .product_alignment_fields
                %p.listing-text= "Name: " + item.product.name
                %p.listing-text= "Category: " + item.product.category
                %p.listing-text= 'Listing Price: $' + item.product.price.to_s
                = button_to "Remove from Cart", shopping_cart_path(item), method: :delete, class: "card-button"
            %td
              .product_listing.right
                %p= link_to "More about #{item.product.name}", product_path(item.product.id), class: "card-button"
            - total_price += item.product.price.to_f

    %h4 Total Price: $#{'%.2f' % total_price}
    %h4 Use Wallet Balance?
    = label_tag :use_wallet_balance, "Balance: $#{'%.2f' % @wallet.wallet}"
    = check_box_tag :use_wallet_balance, nil, false, id: 'use_wallet_balance'

    = submit_tag 'Check Out', :id => 'check_out_button'

%h4= link_to "Return to products page", products_path